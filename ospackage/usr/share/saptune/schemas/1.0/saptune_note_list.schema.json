{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "file:///usr/share/saptune/schemas/1.0/saptune_note_list.schema.json",  

    "title": "",
    "description": "Describes the output of 'saptune note list.",

    "type": "object",
    "required": [ "$schema", "publish time", "argv", "pid", "command", "exit code", "result", "messages"],
    "additionalProperties": false,
    "properties": {

        "$schema": {
            "description": "URI to the schema definition",
            "type": "string"
        },

        "publish time": {
            "description": "saptune timestamp of the time this JSON object was created.",
            "$ref": "#/$defs/saptune timestamp"
        },

        "argv": {
            "description": "The entire saptune command as it was called.",
            "type": "string",
            "minLength": 7,
            "examples": ["saptune --format json note list", "saptune --format json version", "saptune --format json status"]
        },

        "pid": {
            "description": "PID of the saptune process creating this object.",
            "type": "integer",
            "minimum": 2
        },

        "command": {
            "description": "The saptune command (classifier), which was executed.",
            "type": "string",
            "enum": ["note list"]
        },

        "result": {
            "description": "The result (output) of the command.",
            "type": "object",
            "required": ["available Notes", "enabled Notes", "remember message"],
            "additionalProperties": false,
            
            "properties": {
                
                "available Notes": {
                    "description": "List of the applied Notes.",
                    "type":  "array",
                    "items": {
                        "type": "object",
                        "required": [ "Note ID", "Note description", "Note enabled manually", "Note enabled by Solution", "Note reverted manually", "Note override exists", "custom Note" ],
                        "additionalProperties": false,
                        "properties": {
                            "Note ID": { 
                                "description": "Name (ID) of the Note",
                                "type": "string", 
                                "$ref": "#/$defs/saptune note name"
                            },
                            "Note description": {
                                "description": "Description of the Note",
                                "type": "string" 
                            }, 
                            "Note enabled manually": {
                                "description": "States if the Note was enabled manually.",
                                "type": "boolean"
                            }, 
                            "Note enabled by Solution": {
                                "description": "States if the Note was enabled by a Solution.",
                                "type": "boolean"
                            }, 
                            "Note reverted manually": {
                                "description": "States if the Note was reverted manually.",
                                "type": "boolean"
                            }, 
                            "Note override exists": {
                                "description": "States if an override file exists for the Note.",
                                "type": "boolean"
                            }, 
                            "custom Note": {
                                "description": "States if the Note is a custom Note.",
                                "type": "boolean"
                            }
                        }
                    }                       
                },
                "enabled Notes": {
                    "description": "List of the enabled Notes in the order they have been enabled",
                    "type":  "array",
                    "items": {
                        "description": "Name (ID) of the Note",
                        "type": "string", 
                        "$ref": "#/$defs/saptune note name"
                    }
                },
                "remember message": {
                    "description": "The remember message.",
                    "type": "string"
                }            

            }
        },

        "exit code": {
            "description": "The return code the saptune command terminated with.",
            "type": "integer",
            "minimum": 0,
            "maximum": 255
        }, 

        "messages": {
            "description": "Contains all log messages normally printed on the screen in the order they were created",
            "type": "array",
            "items": {
                "description": "A single message.",
                "type": "object",
                "required": ["priority", "message"],
                "additionalProperties": false,
                "properties": {

                    "priority": {
                        "description": "Priority of the log messages as defined AT https://confluence.suse.com/display/SAP/Logging+Guide",
                        "type": "string",
                        "enum": ["CRITICAL", "ERROR" ,"WARNING" ,"NOTICE" ,"INFO", "DEBUG"]
                    },

                    "message": {
                        "description": "The log message itself",
                        "type": "string",
                        "minLength": 1,
                        "examples": ["main.go:57: saptune (3.0.2) started with 'saptune status'", "system.go:235: saptune terminated with exit code '1'"]
                    }
                }
            }
        }
    },


    "$defs": { 

        "saptune timestamp": {
            "description": "Definition of the saptune timestamp used in v2/3.",
            "type": "string",
            "pattern": "^((?:(\\d{4}-\\d{2}-\\d{2}) (\\d{2}:\\d{2}:\\d{2}(?:\\.\\d{3})?)))$",
            "examples": ["2022-02-16 10:51:41.163", "2022-01-28 17:26:19.661"]
        },

        "major saptune version": {

            "description": "The major part of the saptune version, a string with a single digit.",
            "type": "string",
            "pattern": "^[0-9]$"
        },

        "rpm version string": {
            "description": "Format of a RPM version string (simplified).",
            "type": "string",
            "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$",
            "examples": ["1.3.5", "0.3.45"]
        },

        "saptune note name": {
            "description": "Format of Note name (simplified).",
            "type": "string",
            "pattern": "^[^ ]+$",
            "examples": ["1656250", "SAP_BOBJ"]
        }
    }
}